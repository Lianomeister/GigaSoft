# Migration Guide to API v1.0.0

This guide covers updates from `0.1.x-rc` to the frozen `1.0.0` API contract.

## 1. DSL Dependencies

Legacy style remains supported for compatibility:

```kotlin
gigaPlugin(
    id = "demo",
    dependencies = listOf("core", "machines >=1.2.0 <2.0.0")
) { }
```

Recommended for v1.0+:

```kotlin
gigaPlugin(
    id = "demo",
    dependencySpecs = listOf(
        dependency("core"),
        dependency("machines", ">=1.2.0 <2.0.0")
    )
) { }
```

You can also parse strings via `dependencySpec("machines >=1.2.0 <2.0.0")`.

## 2. Host Server Snapshot Field

Use:

- `HostServerSnapshot.platformVersion`

## 3. Host Permissions

Host API and host bridge adapters are permission-gated. Add required permissions in `gigaplugin.yml`.

Example:

```yaml
permissions:
  - host.server.read
  - host.player.read
```

## 4. Manifest Compatibility

Keep `apiVersion: 1` in plugin manifests for `1.x` runtime compatibility.

## 5. Commands and Reload Safety

For reload-safe command wiring, prefer:

- `registerOrReplace(...)` when updating command handlers
- `unregister(...)` for explicit teardown

## 6. Event Dispatch Mode

Runtime supports two modes:

- `exact` (default)
- `polymorphic`

If your plugin relies on superclass/interface event listeners, use `polymorphic`.

## 7. Breaking Changes Policy

From v1.0.0 onward:

- no breaking API signatures in `1.x`
- deprecate first, remove only in next major
